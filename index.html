<!DOCTYPE html>
<html>
<head>
    <title>IP Enforcement Options</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background: #1D252C;
            color: #E5E8EC;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
        }
        .welcome-screen {
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }
        .welcome-content {
            max-width: 800px;
        }
        .welcome-text {
            color: #E5E8EC;
            opacity: 0.9;
            line-height: 1.6;
            margin: 2rem auto;
            font-size: 1.1rem;
        }
        h1 {
            color: #30AEB6;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }
        .question-box {
            background: #313d48;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .option-button {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: #E5E8EC;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-align: left;
            font-size: 16px;
            transition: background-color 0.2s;
        }
        .option-button:hover {
            background: #d1d5d9;
        }
        .option-button.selected {
            background: #30AEB6;
            color: white;
        }
        .explanation {
            background: #3d4957;
            color: #84C98F;
            margin: 10px 0 20px 0;
            padding: 15px;
            border-radius: 4px;
            display: none;
            font-size: 14px;
        }
        .progress-bar {
            background: #313d48;
            height: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .progress {
            background: #30AEB6;
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s;
        }
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .button, .nav-button {
            background: #30AEB6;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: opacity 0.2s;
        }
        .button:hover, .nav-button:hover {
            opacity: 0.9;
        }
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .results-container {
            background: #313d48;
            padding: 30px;
            border-radius: 12px;
            margin-top: 20px;
        }
        .results-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .result-card {
            background: #E5E8EC;
            color: #1D252C;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            display: flex;
            flex-direction: column;
        }
        .result-card:hover {
            transform: translateY(-2px);
        }
        .result-card.not-applicable {
            opacity: 0.5;
            background: #9DA3A8;
        }
        .toggle-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .toggle-button {
            background: #30AEB6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            transition: opacity 0.2s;
            font-weight: 500;
        }
        .toggle-button:hover {
            opacity: 0.9;
        }
        .results-subtext {
            color: #E5E8EC;
            opacity: 0.8;
            margin-bottom: 2rem;
            font-size: 10px;
        }
        .option-subtext {
            color: #E5E8EC;
            opacity: 0.8;
            margin-top: -0.5rem;
            margin-bottom: 1rem;
        }
        .option-title {
            font-weight: 600;
            margin-bottom: 1rem;
        }
        .option-details {
            background: rgba(0,0,0,0.05);
            padding: 1rem;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-size: 0.8rem;
                  
        }
        .detail-item {
            margin: 0.25rem 0;
            font-size: 0.6rem;
                
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="progress-bar">
            <div id="progress" class="progress" style="width: 0%"></div>
        </div>
        <div id="questionContainer" class="question-box"></div>
    </div>

    <script>

        
   // Questions data
const questions = [
    {
        id: 1,
        text: "What is your primary objective?",
        subtext: "To help prioritise options which align with your needs, we would like to know what your goal is. Please select your MAIN goal, noting that multiple aims may be achieved (to varying degrees) by pursuing suggested actions.",
        options: [
            {
                id: 1,
                text: "Obtain financial compensation related to the infringement.",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [1,2,3,4,5,6],
                skipQuestions: []
            },
            {
                id: 2,
                text: "Stop the current infringement from continuing.",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [2],
                skipQuestions: []
            },
            {
                id: 3,
                text: "Raising concern over a potential infringement.",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 2,
        text: "Which country is the IP right being breached registered in?",
        subtext: "IP exists globally, but is made up of a patchwork of cooperating systems. Some actions are only available with rights registered in certain jurisdictions. This includes IP rights which are pending.",
        options: [
            {
                id: 1,
                text: "Registered with IP Australia.",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "Registered with foreign IP offices",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "Registered in both Australia and foreign IP offices.",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 4,
                text: "The IP is not formally registered.",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 3,
        text: "Which intellectual property rights are being infringed?",
        subtext: "If multiple apply, we suggest that you repeat this and treat each matter separately to understand how the options differ depending on the right. The processes and resolutions recommended will vary significantly for each right for some situations.",
        options: [
            {
                id: 1,
                text: "Trade mark",
                explanation: "",
                scores: [],
                markNotApplicable: [8],
                skipQuestions: [8]
            },
            {
                id: 2,
                text: "Patent",
                explanation: "",
                scores: [],
                markNotApplicable: [7],
                skipQuestions: [7]
            },
            {
                id: 3,
                text: "Registered Design",
                explanation: "",
                scores: [],
                markNotApplicable: [7,8],
                skipQuestions: [3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]
            },
            {
                id: 4,
                text: "Plant Breeders Right",
                explanation: "",
                scores: [],
                markNotApplicable: [7,8],
               skipQuestions: [3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]
            },
            {
                id: 5,
                text: "Uncertain",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 6,
                text: "Unregistered Rights (i.e. unregistered trade marks,.)",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 7,
                text: "Other",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 4,
        text: "Please indicate the current status of the registered right.",
        subtext: "The lifecycle of you're your registered rights will affect the best options available to you.",
        options: [
            {
                id: 1,
                text: "Registered",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "Getting close to expiry date",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "No longer registered",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 4,
                text: "Approved, but not yet registered",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 5,
                text: "Under examination",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 6,
                text: "Being challenged by someone",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 5,
        text: "Which statement best describes geographical locations in which the parties are operating?",
        subtext: "Regardless of where the IP rights are registered, the parties to the dispute may be operating in various locations and this factor may vary the appropriate courses of actions and resolution options.",
        options: [
            {
                id: 1,
                text: "All parties are Australian entities",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "Parties involved are a mix of Australian and international",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "All parties operate outside of Australia",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 6,
        text: "What is the approximate value of the IP right?",
        subtext: "An approximate value for the intellectual property in question helps prioritise enforcement actions which are proportionate and cost-effective - whether that means prioritising escalated and costly actions for large cases or practical solutions for smaller infringements. For information on how to value IP, refer here.",
        options: [
            {
                id: 1,
                text: "Less than AUD 10,000",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "AUD 10,000 - 50,000",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "AUD 50,000 - 100,000",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 4,
                text: "Over AUD 100,000",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 5,
                text: "Value cannot be determined at this time",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 7,
        text: "Do you believe any of the following are true about the trade mark in question?",
        subtext: "This question primarily applies to situations when the other party holds a trade mark (in addition to yours) In some rare situations, the validity (the right to be registered) can be challenged.",
        options: [
            {
                id: 1,
                text: "The trade mark unfairly stops others from using words, images or signs that everyone should be able to use in relation to the claimed goods and services",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "The trade mark is too similar to another trade mark that is registered, or has been operating in the market",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "The trade mark hasn't been used for the goods/services it's listed for.",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 4,
                text: "The trade mark hasn't been used at all.",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 5,
                text: "The trade mark has a connotation that might confuse or mislead customers in relation to the goods/services claimed",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 6,
                text: "The trade mark is against Australian law, or contains prescribed signs",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 7,
                text: "The words or images used in the trade mark are offensive or inappropriate.",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 8,
                text: "The trade mark was filed in bad faith",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 9,
                text: "None of these apply",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 8,
        text: "Do you believe any of the following are true about the patent in question?",
        subtext: "This question primarily applies to situations when the other party holds a patent (in addition to yours). In some rare situations, the validity (the right to be registered) can be challenged.",
        options: [
            {
                id: 1,
                text: "It's not new or inventive",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "The invention is not patentable subject matter",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "The details aren't clear or complete",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 4,
                text: "It's misleading or not theirs",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 5,
                text: "None of these.",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 9,
        text: "How quickly is action required?",
        subtext: "What do users need to know here? Insert that.",
        options: [
            {
                id: 1,
                text: "Fast",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "Medium",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "Slower",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 10,
        text: "Have you identified any IP related infringement from someone selling on any of the following online marketplaces?",
        subtext: "Some online marketplaces have ways to alert them to infringement happening on their platform, which can be used in conjunction with other enforcement strategies. (Select all which apply)",
        options: [
            {
                id: 1,
                text: "None",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "Amazon",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "Ebay",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 4,
                text: "Meta (Facebook, Instagram)",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 5,
                text: "Alibaba/AliExpress",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 6,
                text: "Etsy",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 7,
                text: "TikTok",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 8,
                text: "Another, not listed here",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 11,
        text: "Are allegedly infringing products being imported into Australia?",
        subtext: "Are you trying to stop products that infringe your trade marks or copyright entering Australia?",
        options: [
            {
                id: 1,
                text: "Yes",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "No",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
  {
        id: 12,
        text: "In which region do the parties primarily operate? (Select all which apply)?",
        subtext: "Some words go here",
        options: [
            {
                id: 1,
                text: "New Zealand",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "United States",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "ASEAN Countries",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 4,
                text: "European Union",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 5,
                text: "Australia Only",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 6,
                text: "Other",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 7,
                text: "UK",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 8,
                text: "Japan",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 9,
                text: "South Korea",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 10,
                text: "China",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 11,
                text: "Canada",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 12,
                text: "India",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 13,
                text: "South America",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 13,
        text: "Which of the following has been attempted so far?",
        subtext: "We will not suggest something you've already done, eg, and also we will make sure we suggest options that are the right escalation",
        options: [
            {
                id: 1,
                text: "Alternative dispute resolution (mediation, arbitration, negotiation)",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "I have responded to a letter of demand/cease & desist",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "I have sent a letter of demand/cease & desist",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 4,
                text: "Informal communication between parties",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 5,
                text: "Engagement with regulatory bodies (eg ASBFEO, TGA)",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 6,
                text: "None",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 7,
                text: "Reporting to online platforms",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 8,
                text: "engaged a lawyer or attorney",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 9,
                text: "IP Australia Oppositions and hearings procedures",
                explanation: "",
                scores: [1,0,1,0,1,2],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 14,
        text: "Would you require confidentiality when resolving this issue?",
        subtext: "Businesses sometimes need to keep certain actions confidential to protect intellectual property, maintain a competitive advantage, or manage public perception effectively. This can involve safeguarding trade secrets, pending patents, or sensitive business information that, if prematurely disclosed, could harm the company's interests.",
        options: [
            {
                id: 1,
                text: "Yes",
                explanation: "",
                scores: [1,0,1,0,1,1],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "No / not sure",
                explanation: "",
                scores: [1,0,1,0,1,1],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 15,
        text: "How important to preserve a relationship with the other party?",
        subtext: "The relationship you have with the alleged infringer helps determine options to consider which are most effective and help maintain good business relations.",
        options: [
            {
                id: 1,
                text: "There is an ongoing relationship which is likely to continue.",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "There was a previous relationship.",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 3,
                text: "Open to establishing a relationship",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 4,
                text: "No relationship now, and no expectation of one in the future.",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    },
    {
        id: 16,
        text: "Are you likely to consider negotiating in good faith to resolve this issue?",
        subtext: "Negotiated solutions often provide faster, more cost-effective, and mutually beneficial outcomes compared to other options. Common approaches include license agreements; coexistence agreements; cross-licensing arrangements exchanging reciprocal IP rights; structured phase-out periods; technology transfer agreements; joint venture opportunities; or structured settlements combining financial and behavioral terms.",
        options: [
            {
                id: 1,
                text: "Likely",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            },
            {
                id: 2,
                text: "Unlikely",
                explanation: "",
                scores: [],
                markNotApplicable: [],
                skipQuestions: []
            }
        ]
    }
];

// State management
let state = {
    started: false,
    currentQuestion: 0,
    scores: [0, 0, 0, 0, 0, 0],
    notApplicableOptions: new Set(),
    skipQuestions: new Set(),
    showNotApplicable: false,
    showAllOptions: false
};
        

function init() {
    const container = document.getElementById('questionContainer');
    if (!state.started) {
        container.innerHTML = `
            <div class="welcome-screen">
                <div class="welcome-content">
                    <h1>My Rights have been infringed</h1>
                    <p class="welcome-text">
                        This tool is designed to help you narrow down and prioritise potential actions based on the information you provide about your situation. At the conclusion, you will receive a shortlist of options for your consideration, empowering you to make an informed decision.
                    </p>
                    <button class="button" onclick="startQuiz()">Begin Assessment</button>
                </div>
            </div>
        `;
    }
}

function startQuiz() {
    state.started = true;
    showQuestion(0);
}

function showQuestion(questionIndex) {
    state.currentQuestion = questionIndex;
    const question = questions[questionIndex];
    const container = document.getElementById('questionContainer');
    
    document.getElementById('progress').style.width = 
        `${((questionIndex + 1) / questions.length) * 100}%`;
    
    let html = `
        <h2>${question.text}</h2>
        <p class="subtext">${question.subtext}</p>
    `;
    
    question.options.forEach((option, index) => {
        html += `
            <button 
                class="option-button" 
                onclick="selectOption(${index})"
            >${option.text}</button>
            <div class="explanation">
                ${option.explanation}
            </div>
        `;
    });

    html += `
        <div class="nav-buttons">
            <button 
                class="nav-button" 
                onclick="navigate(-1)" 
                ${questionIndex === 0 ? 'disabled' : ''}
            >Previous</button>
            <button 
                class="nav-button" 
                onclick="navigate(1)"
            >${questionIndex === questions.length - 1 ? 'See Results' : 'Next'}</button>
        </div>
    `;
    
    container.innerHTML = html;
}

function selectOption(optionIndex) {
    const question = questions[state.currentQuestion];
    const option = question.options[optionIndex];
    
    // Clear previous selections visual state
    document.querySelectorAll('.option-button').forEach(btn => {
        btn.classList.remove('selected');
    });
    document.querySelectorAll('.explanation').forEach(exp => {
        exp.style.display = 'none';
    });
    
    // Update visual state for selected option
    document.querySelectorAll('.option-button')[optionIndex].classList.add('selected');
    document.querySelectorAll('.explanation')[optionIndex].style.display = 'block';
    
    // Update scores
    option.scores.forEach((score, index) => {
        state.scores[index] += score;
    });
    
    // Handle not applicable options
    if (option.markNotApplicable) {
        option.markNotApplicable.forEach(optionId => {
            state.notApplicableOptions.add(optionId);
        });
    }

    // Add skip questions to state Set
    if (option.skipQuestions) {
        option.skipQuestions.forEach(questionNum => {
            state.skipQuestions.add(questionNum);
        });
    }
}

function navigate(direction) {
    let nextIndex = state.currentQuestion + direction;
    
    // Get the currently selected option
    const currentQuestion = questions[state.currentQuestion];
    const selectedOptionIndex = Array.from(document.querySelectorAll('.option-button'))
        .findIndex(btn => btn.classList.contains('selected'));
    
    if (selectedOptionIndex !== -1 && direction > 0) {
        // Keep skipping while the next question is in the skip set
        while (state.skipQuestions.has(nextIndex) && nextIndex < questions.length) {
            nextIndex++;
        }
    }
    
    // Ensure we're within bounds
    if (nextIndex >= 0 && nextIndex < questions.length) {
        showQuestion(nextIndex);
    } else if (nextIndex >= questions.length) {
        // Handle end of quiz/show results
        showResults();
    }
}

function showResults() {
    const applicableOptions = [
        { 
            id: 1, 
            text: "Send Cease and Desist Letter", 
            score: state.scores[0],
            cost: "free",
            effort: "5-7 hours",
            resolution: "54%",
                                                hidden: false
        },
        { 
            id: 2, 
            text: "File for Preliminary Injunction", 
            score: state.scores[1],
            cost: "$5,000-10,000",
            effort: "20-30 hours",
            resolution: "78%",
                                    hidden: false
        },
        { 
            id: 3,

            text: "Initiate Settlement Discussion", 
            score: state.scores[2],
            cost: "$1,000-3,000",
            effort: "10-15 hours",
            resolution: "65%",
                                    hidden: false
        },
        { 
            id: 4, 
            text: "File a non use request for the TM", 
            score: state.scores[3],
            cost: "$2,000-4,000",
            effort: "8-12 hours",
            resolution: "70%",
                                    hidden: false
        },
        { 
            id: 5, 
            text: "Use Amazon Brand Registry", 
            score: state.scores[4],
            cost: "free",
            effort: "3-5 hours",
            resolution: "85%",
            hidden: false
        },
        { 
            id: 6, 
            text: "File Opposition with IPA (S42a, s42b, s39) : Uses things not allowed in TMs (offensive or against law, or prescribed signs)", 
            score: state.scores[5],
            cost: "$5,000+",
            effort: "2-3 hours",
            resolution: "90%",
            hidden: false
            
        }

        
    ]
    .map(opt => ({
        ...opt,
        notApplicable: state.notApplicableOptions.has(opt.id)
    }))
    .sort((a, b) => b.score - a.score);
        const visibleOptions = applicableOptions.filter(opt => !opt.hidden);

const filtered = visibleOptions.filter(opt => !opt.notApplicable);
const naOptions = visibleOptions.filter(opt => opt.notApplicable);

    const container = document.getElementById('questionContainer');
    container.innerHTML = `
        <div class="results-container">
            <h2>Based on your answers, you could consider the following courses of action</h2>
            <p class="results-subtext">It is important to go through all options to determine what's best for you.</p>
            
            <h3 style="color: #30AEB6">Highest-rated suggestions based on your results</h3>
            <p class="option-subtext">You could do one or all of any of these options.</p>
            <div class="results-grid">
                ${filtered.slice(0, 3).map(option => `
                    <div class="result-card">
                        <p class="option-title">${option.text}</p>
                        <div class="option-details">
                            <div class="detail-item">Cost: ${option.cost}</div>
                            <div class="detail-item">Effort: ${option.effort}</div>
                            <div class="detail-item">Rate of resolution: ${option.resolution}</div>
                        </div>
                      <span style="color: #E5E8EC">${option.score}</span>                
                    </div>
                `).join('')}
            </div>

            <h3 style="color: #30AEB6">Other suggestions to consider</h3>
            <div class="results-grid">
                ${filtered.slice(3, 6).map(option => `
                    <div class="result-card">
                        <p class="option-title">${option.text}</p>
                        <div class="option-details">
                            <div class="detail-item">Cost: ${option.cost}</div>
                            <div class="detail-item">Effort: ${option.effort}</div>
                            <div class="detail-item">Rate of resolution: ${option.resolution}</div>
                        </div>
                        <span style="color: #E5E8EC">${option.score}</span>
                    </div>
                `).join('')}
            </div>

            <div class="toggle-buttons">
                <button 
                    class="toggle-button" 
                    onclick="toggleNotApplicable()"
                >
                    ${naOptions.length > 0 ? 
                        `Show ${naOptions.length} Not Applicable Options` : 
                        'No Not Applicable Options'}
                </button>
            </div>

            ${state.showNotApplicable && naOptions.length > 0 ? `
                <div style="margin-top: 20px;">
                    <h3 style="color: #9DA3A8">Not Applicable Options</h3>
                    <div class="results-grid">
                        ${naOptions.map(option => `
                            <div class="result-card not-applicable">
                                <p class="option-title">${option.text}</p>
                                <div class="option-details">
                                    <div class="detail-item">Cost: ${option.cost}</div>
                                    <div class="detail-item">Effort: ${option.effort}</div>
                                    <div class="detail-item">Rate of resolution: ${option.resolution}</div>
                                </div>
                                <span style="color: #E5E8EC">${option.score}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            ` : ''}
        </div>
    `;
}

function toggleNotApplicable() {
    state.showNotApplicable = !state.showNotApplicable;
    showResults();
}

// Start the application
init();
          </script>
</body>
</html>
